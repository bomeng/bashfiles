<!doctype html>
<html ng-app="flannel" ng-controller="AppCtrl as app" ng-strict-di>
<!-- //////// HEAD START //////// -->
<head>

  <!-- //// META TAGS START //// -->
  <!-- adding this meta tag to try to snap IE9 out of Quirks mode. note, this must be the first meta tag and ahead of any conditional comments in order to work. http://stackoverflow.com/questions/3449286/force-ie-compatibility-mode-off-in-ie-using-tags -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta charset="UTF-8">

  <!-- <meta name="robots" content="noindex,nofollow"> -->
  <!-- shorter and equivalent to the boilerplate above: -->
  <meta name="robots" content="none">
  <!-- preventing crawls with google's recommended meta tag -->
  <!-- https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag -->

  <!-- ensures that (mobile) browsers don't load the app in a zoomed state -->
  <meta name="viewport" content="initial-scale=1">
  <title ng-bind="app.appTitle">SolarCity</title>

  <!-- ///////////// STYLES ///////////// -->

  <!-- if you would like to avoid FOUCs while scripts load -->
  <!-- always load styles before scripts in the head -->

  <!-- fln-chat styles   // TODO: HACK: nix that shit ASAP -->
  <link href="lib/fln-chat-jquery-ui.css" rel="stylesheet">
  <link href="lib/fln-chat-jquery-ui-chatbox.css" rel="stylesheet">

  <!-- Dependencies & libraries -->
  <link href="lib/jquery.nouislider.css" rel="stylesheet">

  <link href="css/all.css" rel="stylesheet">
  <!-- <link href="css/all.min.css" rel="stylesheet"> -->
  <link href="lib/ol.css" rel="stylesheet">
  <!-- <link href="lib/ol.min.css" rel="stylesheet"> -->

  <!-- //////////// STYLES END ///////////// -->


  <!-- angular -->
  <script src="lib/angular.js"></script>

  <!-- RXjs -->
  <script src="lib/rx.all.js"></script>
  <!-- <script src="lib/rx.all.min.js"></script> -->

  <!-- openlayers v3 -->
  <script src="lib/ol.js"></script>
  <!-- <script src="lib/ol-debug.js"></script> -->

  <!-- jQuery -->
  <script src="lib/jquery.js"></script>
  <!-- <script src="lib/jquery.min.js"></script> -->
  <script src="lib/jquery.widowFix-1.3.2.js"></script>
  <!-- <script src="lib/jquery.widowFix-1.3.2.min.js"></script> -->
  <script src="lib/mailgun_validator.js"></script>

  <!-- fln-chat-scripts   // TODO: HACK: nix that shit ASAP -->
  <script src="lib/fln-chat-jquery-ui.js"></script>
  <script src="lib/fln-chat-jquery-ui-chatbox.js"></script>

  <!-- fln-chat-scripts   // TODO: HACK: nix that shit ASAP -->
  <script src="lib/fln-chat-jquery-ui.js"></script>
  <script src="lib/fln-chat-jquery-ui-chatbox.js"></script>

  <!-- Dependencies & libraries if you want environmental conditionals -->

  <!-- <script ng-switch-when="false" src="lib/angular.js"></script> -->
  <!-- <script ng-switch-when="true" src="lib/angular.min.js"></script> -->

  <!-- <switch ng-switch="app.minified"> -->
    <!-- <link ng-switch-when="false" href="css/all.css" rel="stylesheet"> -->
    <!-- <link ng-switch-when="true" href="css/all.min.css" rel="stylesheet"> -->
    <!-- <link ng-switch-when="false" href="lib/ol.css" rel="stylesheet"> -->
    <!-- <link ng-switch-when="true" href="lib/ol.min.css" rel="stylesheet"> -->

    <!-- RXjs -->
    <!-- <script ng-switch-when="false" src="lib/rx.all.js"></script> -->
    <!-- <script ng-switch-when="true" src="lib/rx.all.min.js"></script> -->

    <!-- openlayers v3 -->
    <!-- <script ng-switch-when="false" src="lib/ol.js"></script> -->
    <!-- <script ng-switch-when="true" src="lib/ol-debug.js"></script> -->

    <!-- jQuery -->
    <!-- <script ng-switch-when="false" src="lib/jquery.js"></script> -->
    <!-- <script ng-switch-when="true" src="lib/jquery.min.js"></script> -->
    <!-- <script ng-switch-when="false" src="lib/jquery.widowFix-1.3.2.js"></script> -->
    <!-- <script ng-switch-when="true" src="lib/jquery.widowFix-1.3.2.min.js"></script> -->

  <!-- </switch> -->

  <!-- MapBox -->
  <!-- Mapbox script -->
  <!-- <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script> -->
  <!-- Mapbox styles -->
  <!-- <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' /> -->
  <!-- Mapbox access token -->
  <!-- <script>L.mapbox.accessToken = 'pk.eyJ1Ijoic29sYXJjaXR5IiwiYSI6IkVnZ3AtbTgifQ.LxtRfmX2J0qJ-Lf7QihSIg';</script> -->

  <!-- google maps -->
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&sensor=false&client=#{app.gmapClient}"></script>

  <!-- Apercu fonts from FontDeck -->
  <!-- TODO: prevent a FOUT -->
  <!-- TODO: lessen 2s load lags -->
  <script type="text/javascript">
    WebFontConfig = { fontdeck: { id: '50798' } };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
      s.parentNode.insertBefore(wf, s);
    })();
  </script>

  <!-- SALESFORCE LIVEAGENT -->
  <script type='text/javascript' src='https://c.la3-c2cs-chi.salesforceliveagent.com/content/g/js/32.0/deployment.js'></script>
  <script type='text/javascript'>
    liveagent.init('https://d.la3-c2cs-chi.salesforceliveagent.com/chat', '57219000000CaSA', '00D19000000Dtc3');
  </script>
  <script type="text/javascript">
    /*
      document ready.
    */
    $(document).ready(function()
    {
      /*
        declare gloabl box variable,
        so we can check if box is alreay open,
        when user click toggle button
      */
      var box = null;

      /*
        we are now adding click hanlder for
        toggle button.
      */

      $("input[type='button']").click(function(event, ui)
      {
        /*
          now if box is not null,
          we are toggling chat box.
        */
        if(box)
        {
          /*
            below code will hide the chatbox that
            is active, when first clicked on toggle button
          */
          box.chatbox("option", "boxManager").toggleBox();
          <!-- changed -->
          <!-- liveagent.startChat('573i0000000FGFY'); -->
          liveagent.startChat('57319000000CaTc');

        }
        else
        {
          $('#liveAgentChat').attr('src','https://d.la3-c2cs-chi.salesforceliveagent.com/content/s/chat?language=en#deployment_id=57219000000CaSA&org_id=00D19000000Dtc3&button_id=57319000000CaTc&session_id=9dc885db-a138-4214-a731-f02d83aa9a12'); //Here you need to change the url with the corrects ID's
          /*
            if box variable is null then we will create
            chat-box.
          */
          box = $("#chat_div").chatbox(
          {
            /*
              unique id for chat box
            */
            id:"Runnable",
                        user:
            {
              key : "value"
            },
            /*
              Title for the chat box
            */
            title : "SolarCity",

          });
        }
      });
    });
  </script>
</head>

<body ng-cloak ng-controller="StageCtrl as stages">
  <!-- TODO: apply ng-cloak only to divs that need it -->
  <div fln-dev-tools ng-class="{shown: panelShown}" class="dev-drawer inverse"></div>
  <header ui-view name="header" id="header" class="header"></header>
  <form fln-form novalidate name="prospectForm" class="prospect-form">
    <main ui-view name="main" id="main" class="main"></main>
  </form>
  <footer ui-view name="footer" id="footer" class="footer row"></footer>
  <!-- <div fln-chat class="chat" ng-controller="ChatCtrl as chat" ng-show="chat.shown"></div> -->
  <div fln-modal class="modal" ng-show="modal.isOn()" ng-click=""></div>

  <!-- TAIL of the BODY -->
  <script src="lib/angular-touch.js"></script>
  <script src="lib/angular-cookies.js"></script>
  <script src="lib/angular-ui-router.min.js"></script>
  <script src="lib/moment.js"></script>

  <!-- noUIslider scripps -->
  <script src="lib/jquery.nouislider.js"></script>
  <script src="lib/Link.js"></script>
  <script src="lib/nouislider.js"></script>
  <script src="lib/nouislider.min.js"></script>

  <!-- firebase related -->
  <script src="lib/firebase-debug.js"></script>
  <!-- <script src="lib/firebase.js"></script> -->
  <script src="lib/angularfire.js"></script>
  <!-- <script src="lib/angularfire.min.js"></script> -->
  <script src="lib/rx.angular.js"></script>
  <!-- <script src="lib/rx.angular.min.js"></script> -->
  <script src="lib/rx.firebase.js"></script>
  <!-- <script src="lib/rx.firebase.min.js"></script> -->

  <!-- Application -->

  <!-- <switch ng-switch="app.minified">
    <script ng-switch-when="false" src="lib/ui-bootstrap.js"></script>
    <script ng-switch-when="true" src="lib/ui-bootstrap.min.js"></script>

    <script ng-switch-when="false" src="lib/firebase-debug.js"></script>
    <script ng-switch-when="true" src="lib/firebase.js"></script>

    <script ng-switch-when="false" src="lib/angularfire.js"></script>
    <script ng-switch-when="true" src="lib/angularfire.min.js"></script>

    <script ng-switch-when="false" src="lib/rx.angular.js"></script>
    <script ng-switch-when="true" src="lib/rx.angular.min.js"></script>

    <script ng-switch-when="false" src="lib/rx.firebase.js"></script>
    <script ng-switch-when="true" src="lib/rx.firebase.min.js"></script>
  </switch> -->
  <!--SCRIPTS--><!--SCRIPTS END-->

  <!-- SALESFORCE LIVEAGENT CHAT START -->
  <div class="chat-buttons">
    <img id="liveagent_button_online_57319000000CaTc" style="display: none; border: 0px none; cursor: pointer" onclick="liveagent.startChat('57319000000CaTc')" src="https://oda-solarcity.cs24.force.com/support/resource/1423088340000/Chat_Online" />

    <img id="liveagent_button_offline_57319000000CaTc" style="display: none; border: 0px none; " src="https://oda-solarcity.cs24.force.com/support/resource/1423088060000/Chat_Offline" />

    <input type="button" class="btn orange" style="z-index:1000;"name="toggle" value="Get Help"/>
  </div>
  <!--Chat box will be generated in this container-->

  <div id="chat_div">
    <iframe id='liveAgentChat' height="250px;" ></iframe>
  </div>

  <script type="text/javascript">
    console.log(liveagent);
    if (!window._laq) { window._laq = []; }
    window._laq.push(
      function(){
        liveagent.showWhenOnline(
          '57319000000CaTc',
          document.getElementById('liveagent_button_online_57319000000CaTc')
        );

        liveagent.showWhenOffline(
          '57319000000CaTc',
          document.getElementById('liveagent_button_offline_57319000000CaTc')
        );
      }
    );
  </script>
  <!-- SALESFORCE LIVEAGENT CHAT END -->

</body>

</html>
